machine:
  timezone:
    Asia/Tokyo
  php:
    version: 5.6.2

dependencies:
  override:
    - mkdir -p build/logs
    - composer install --dev --no-interaction
    - sed -i 's/^;//' ~/.phpenv/versions/$(phpenv global)/etc/conf.d/xdebug.ini

test:
  override:
    - phpunit --coverage-clover build/logs/clover.xml --configuration tests/phpunit.xml tests
  post:
    - php vendor/bin/coveralls -v
    - git diff --name-only origin/master | grep ".*.php$" | xargs phpcs --report=source --standard=./tests/phpcs.xml
    - git diff --name-only origin/master | grep ".*.php$" | xargs phpcs --report=checkstyle --standard=./tests/phpcs.xml

